<h1 style="font-size: 24px; color: #202223; margin-bottom: 16px;">
  We noticed something on your product page
</h1>

<p style="margin-bottom: 16px;">
  Hi there,
</p>

<p style="margin-bottom: 16px;">
  Prowl detected a potential issue on <strong><%= @product_page.title %></strong> that may affect your customers' ability to purchase.
</p>

<div style="background-color: #fef3cd; border-left: 4px solid #f0b429; padding: 16px; margin-bottom: 24px; border-radius: 4px;">
  <strong style="color: #856404;"><%= @issue.title %></strong>
  <p style="margin: 8px 0 0 0; color: #856404;"><%= @issue.merchant_explanation %></p>
</div>

<% if @has_screenshot %>
<div style="margin-bottom: 24px;">
  <p style="font-weight: 600; margin-bottom: 8px; color: #202223;">Here's what we saw:</p>
  <img src="<%= attachments['screenshot.png'].url %>"
       alt="Screenshot of <%= @product_page.title %>"
       style="max-width: 100%; border: 1px solid #e1e3e5; border-radius: 8px;" />
</div>
<% end %>

<% if @issue.merchant_suggested_fix.present? %>
<div style="background-color: #f0faf5; border-left: 4px solid #008060; padding: 16px; margin-bottom: 24px; border-radius: 4px;">
  <strong style="color: #004c3f;">ðŸ’¡ Suggested fix:</strong>
  <p style="margin: 8px 0 0 0; color: #004c3f; white-space: pre-line;"><%= @issue.merchant_suggested_fix %></p>
</div>
<% end %>

<% if @issue.ai_confirmed == true && @issue.ai_confidence.present? %>
<p style="margin-bottom: 16px; color: #2c6ecb; font-size: 14px;">
  ðŸ¤– Our AI also confirmed this issue with <%= (@issue.ai_confidence * 100).round %>% confidence.
</p>
<% end %>

<p style="margin-bottom: 8px;">
  <strong>What this means:</strong>
</p>
<p style="margin-bottom: 16px;">
  This issue has been detected multiple times, suggesting it may be a real problem rather than a temporary glitch. We recommend reviewing the page to ensure customers can complete their purchase.
</p>

<p style="margin-bottom: 24px;">
  <a href="<%= @app_url %>" class="button" style="display: inline-block; background-color: #008060; color: #ffffff !important; text-decoration: none; padding: 12px 24px; border-radius: 4px; font-weight: 500;">
    View Issue Details
  </a>
</p>

<p style="margin-bottom: 16px; color: #6d7175; font-size: 14px;">
  <em>We only alert you when we're confident there's a real issue. This helps us avoid false alarms.</em>
</p>
